<!DOCTYPE html>
<html>
  <head>
    <title>Flight Simulator User Interface</title>
    <meta name ="viewport" content="width=device-width, initial-scale=1.0">
    <link href = "css/bootstrap.min.css" rel = "stylesheet">
    <style>
      #map-canvas {
        width: 1000px;
        height: 800px;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js"></script>
    <script>
      function initialize() {
        var mapCanvas = document.getElementById('map-canvas');
        var mapOptions = {
          center: new google.maps.LatLng(44.5403, -78.5463),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(mapCanvas, mapOptions)
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <script src = "http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src = "js/bootstrap.js"></script>
    <script>
            var marker;
            var map;
            var angle = 0;
            var icon = {
                        path: 'M362.985,430.724l-10.248,51.234l62.332,57.969l-3.293,26.145 l-71.345-23.599l-2.001,13.069l-2.057-13.529l-71.278,22.928l-5.762-23.984l64.097-59.271l-8.913-51.359l0.858-114.43 l-21.945-11.338l-189.358,88.76l-1.18-32.262l213.344-180.08l0.875-107.436l7.973-32.005l7.642-12.054l7.377-3.958l9.238,3.65 l6.367,14.925l7.369,30.363v106.375l211.592,182.082l-1.496,32.247l-188.479-90.61l-21.616,10.087l-0.094,115.684',
                        scale: 0.05, 
                        strokeOpacity: 1,
                        color: 'black',
                        strokeWeight: 1,
                        rotation: 0,
                    };
            function initialize() {
                var myLatlng = new google.maps.LatLng(25.363882,131.044922);
                var mapOptions = {
                  zoom: 4,
                  center: myLatlng
                }
                var image = "plane4.png";
                map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

                marker = new google.maps.Marker({
                    position: myLatlng,
                    map: map,
                    title: 'Hello World!',
                    icon: icon
                });
                map.setZoom(15);
              }
            google.maps.event.addDomListener(window, 'load', initialize);
            var myVar=setInterval(function(){readTextFile2()},250);
            function readTextFile(file)
            {
                var rawFile = new XMLHttpRequest();
                rawFile.open("GET", file, false);
                rawFile.onreadystatechange = function ()
                {
                    if(rawFile.readyState === 4)
                    {
                        if(rawFile.status === 200 || rawFile.status == 0)
                        {
                            var allText = rawFile.responseText;
                            var strs = allText.split(" ");
                            var newLatLng = new google.maps.LatLng(strs[0], strs[1]);
                            marker.setPosition(newLatLng);
                            map.panTo(newLatLng);
                            angle = parseFloat(strs[2]);
                            icon.rotation = angle;
                            marker.setIcon(icon);
                        }
                    }
                }
                rawFile.send(null);
            }
            function readTextFile2(){
                readTextFile("foo.txt");
            }
    </script>
     <div class = "navbar navbar-default navbar-fixed-top">
      <div class = "container">
        <a href = "#" class = "navbar-brand">
          FlightGear User Interface
        </a>
        <button class = "navbar-toggle" data-toggle = "collapse" data-target = ".navHeaderCollapse">
          <span class = "icon-bar"></span>
          <span class = "icon-bar"></span>
          <span class = "icon-bar"></span>
        </button>
        <div class = "collapse navbar-collapse navHeaderCollapse">
          <ul class = "nav navbar-nav navbar-right">
            <li class = "active"><a href = "index.html">Home</a></li>
            <li><a href = "map.html">Map View</a></li>
            <li class = "dropdown">
              <a href = "#" class = "dropdown-toggle" data-toggle = "dropdown">Logging<b class = "caret"></b></a>
              <ul class = "dropdown-menu">
                <li><a href = "#">Velocity</a></li>
                <li><a href = "#">Acceleration</a></li>
                <li><a href = "#">Altitude</a></li>
              </ul>
            </li>
            <li><a href = "instructions.html">Instructions</a></li>
            <li><a href = "#contact" data-toggle="modal">Contact Us</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="col-xs-12" style="height:100px;"></div>
    <center><div id="map-canvas"></div><center>
    <div class="col-xs-12" style="height:50px;"></div>
    <div class = "navbar navbar-default navbar-fixed-bottom">
      <div class = "container">
        <p class = "navbar-text pull-left">Site built by John Gee</p>
        <a href = "#" class = "navbar-btn btn-danger btn pull-right">Subscribe on YouTube</a>
      </div>
    </div>
    <div class="col-xs-12" style="height:50px;"></div>
    <div class = "modal fade" id = "contact" role = "dialog">
      <div class = "modal-dialog">
        <div class = "modal-content">
          <form class = "form-horizontal">
            <div class = "modal-header">
              <h4>Contact Us</h4>
            </div>
            <div class = "modal-body">
              <div class = "form-group">
                <label for = "name" class = "col-lg-3 control-label">Name:</label>
                <div class = "col-lg-9">
                  <input type = "text" class = "form-control" id = "name" placeholder = "John Smith">
                </div> 
              </div>
              <div class = "form-group">
                <label for = "email" class = "col-lg-3 control-label">Email:</label>
                <div class = "col-lg-9">
                  <input type = "text" class = "form-control" id = "email" placeholder = "johnsmith@example.com">
                </div> 
              </div>
              <div class = "form-group">
                <label for = "message" class = "col-lg-3 control-label">Message:</label>
                <div class = "col-lg-9">
                  <textarea class = "form-control" rows = "8" placeholder = "Blah blah blah."></textarea>
                </div> 
              </div>
            </div>
            <div class = "modal-footer">
              <a class = "btn btn-default" data-dismiss = "modal">Close</a>
              <button class = "btn btn-primary">Send</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>